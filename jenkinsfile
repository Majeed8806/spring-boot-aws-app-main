pipeline {
    agent any

    stages {
        stage('git checkout') {
            steps {
               git 'https://github.com/Majeed8806/spring-boot-aws-app-main.git'
            }
        }

        stage('unit test') {
            steps {
               sh 'mvn test'
            }
        }
        stage('test 2') {
            steps {
               sh 'mvn verify -DskipUnitTests'
            }
        }
        stage('build') {
            steps {
               sh 'mvn clean install'
               }
           }
        stage('sonarqube') {
            steps {
               parameters {
                 credentials credentialType: 'org.jenkinsci.plugins.plaincredentials.impl.StringCredentialsImpl', defaultValue: 'sonarqubetoken', name: 'sonarqube', required: false
                     }
                 sh 'mvn sonar:sonar'
               }
           }


    }
}
